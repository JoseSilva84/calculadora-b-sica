// === Seletores principais ===
const inputNumero = document.getElementById('inputNumero');
const painel = document.getElementById('painel');

// === Estado da calculadora ===
let valorAtual = "";
let valorAnterior = "";
let operacao = null;

// === Funções auxiliares ===
function atualizarDisplay(conteudo) {
    inputNumero.innerHTML = conteudo;
    inputNumero.style.marginLeft = "250px";
}

function limparTudo() {
    valorAtual = "";
    valorAnterior = "";
    operacao = null;
    atualizarDisplay("");
    painel.innerHTML = "";
}

// === Lógica dos botões numéricos ===
for (let i = 0; i <= 9; i++) {
    const botao = document.getElementById(`btn${i}`);
    botao.addEventListener('click', () => {
        valorAtual += i;
        atualizarDisplay(valorAtual);
    });
}

// === Lógica dos botões de operação ===
const operacoes = {
    btnMais: '+',
    btnMenos: '-',
    btnx: '*'
};

for (const [id, simbolo] of Object.entries(operacoes)) {
    document.getElementById(id).addEventListener('click', () => {
        if (!valorAtual) return; // evita clicar sem número
        valorAnterior = valorAtual;
        valorAtual = "";
        operacao = simbolo;
        atualizarDisplay(`${valorAnterior} ${operacao}`);
    });
}

// === Botão de vírgula ===
document.getElementById('btnvirgula').addEventListener('click', () => {
    if (!valorAtual.includes('.')) {
        valorAtual += '.';
        atualizarDisplay(valorAtual);
    }
});

// === Botão de igual ===
document.getElementById('btnigual').addEventListener('click', () => {
    if (!valorAnterior || !valorAtual || !operacao) return;

    const num1 = parseFloat(valorAnterior);
    const num2 = parseFloat(valorAtual);
    let resultado = 0;

    switch (operacao) {
        case '+': resultado = num1 + num2; break;
        case '-': resultado = num1 - num2; break;
        case '*': resultado = num1 * num2; break;
        case '/': resultado = num2 !== 0 ? num1 / num2 : 'Erro'; break;
    }

    atualizarDisplay(`${num1} ${operacao} ${num2} = ${resultado}`);
    painel.innerHTML = resultado;

    // limpa após 3 segundos
    setTimeout(() => painel.innerHTML = '', 3000);

    valorAnterior = "";
    valorAtual = "";
    operacao = null;
});

// === Botão de zerar ===
document.getElementById('btnZerar').addEventListener('click', limparTudo);
